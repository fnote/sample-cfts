AWSTemplateFormatVersion: 2010-09-09
Description: This is the stack for CP Mimix Daily Purge ECS cluster
Parameters:
  Environment:
    Description: Environment for application
    Type: String
    Default: Execution
    AllowedValues:
      - Development
      - Execution
      - Quality
      - Staging
      - Tuning
      - Production
    ConstraintDescription: Must be a valid environment
  PONumber:
    Description: PO Number for billing
    Type: String
    Default: 7000002358
  ApplicationID:
    Description: Application ID - Official Application_ID, this is generated by Sysco's CMDB
    Type: String
    Default: APP-001151
  ApplicationName:
    Description: Application_Name - Common, user-friendly name
    Type: String
    Default: Cloud Pricing
  Component:
    Description: Component name
    Type: String
    Default: CP Mimix Purge
  Owner:
    Description: Email address usually Product/ Platform Owner, though team distribution list for technical product/platform team contact
    Type: String
    Default: krishan.senevirathne@sysco.com
  Approver:
    Description: Person approving instance funding.  This should be Email address formatted
    Type: String
    Default: villanueva.loi@corp.sysco.com
  SupportEmail:
    Description: Email distribution list for technical product/platform team contact
    Type: String
    Default: 000-BT-PricingPlatform@Corp.sysco.com
  ProjectID:
    Description: Project_ID - BT Project ID for this workload
    Type: String
    Default: BT.001176
  2WTAGGER:
    Description: Used by 2nd Watch Managed Services in shared accounts to determine if a resource is supported
    Type: String
    Default: team_managed
  Platform:
    Description: Platform
    Type: String
    Default: Cloud Pricing V4
  ServiceName:
    Description: Service Name
    Type: String
    Default: Pricing service
  EnvironmentShort:
    Description: Environment for application
    Type: String
    Default: EXE
  ExecutionRole:
    Description: ARN of execution role attached to ECS task.
    Type: String
    Default: arn:aws:iam::037295147636:role/CloudPricing-Mimix-Purge-Job-Role
  TaskRole:
    Description: ARN of task role attached to ECS task.
    Type: String
    Default: arn:aws:iam::037295147636:role/CloudPricing-Mimix-Purge-Job-Role
  TriggeringRole:
    Description: ARN of triggering role attached to cloud watch Events.
    Type: String
    Default: arn:aws:iam::037295147636:role/CloudPricing-Mimix-Purge-Triggering-Role
  MimixPurgeServiceRole:
    Description: ARN of triggering role attached to cloud watch Events.
    Type: String
    Default: arn:aws:iam::037295147636:role/Cloud-Pricing-Mimix-Purge-Service-Role
  PurgeInstanceRole:
    Description: ARN of role attached to Mimix Purge Sync Servers.
    Type: String
    Default: arn:aws:iam::037295147636:instance-profile/Cloud-Pricing-Mimix-Purge-Instance-Profile
  DockerImageArn:
    Description: Docker image of mimix sync processor
    Type: String
    Default: 037295147636.dkr.ecr.us-east-1.amazonaws.com/cp-query-sync
  JobDefinitionArn:
    Description: Job Definition Arn
    Type: String
    Default: arn:aws:batch:us-east-1:037295147636:job-definition/CP-Mimix-Purge-Job-Definition-EXE
  PvtSNa:
    Description: 'Private PRCP-NP Confidential Subnet 1 in us-east-1a CIDR: 10.133.103.0/24'
    Type: String
    Default: subnet-0186b43162a344d9a
  PvtSNb:
    Description: 'Private PRCP-NP Confidential Subnet 2 in us-east-1b CIDR: 10.133.105.0/24'
    Type: String
    Default: subnet-0ad1216eb31e15186
  PvtSNc:
    Description: 'Private PRCP-NP Confidential Subnet 3 in us-east-1c CIDR: 10.133.106.0/24'
    Type: String
    Default: subnet-0a5d9eea71b9c97c6
  VPCID:
    Description: Name of and existing VPC
    Type: String
    Default: vpc-091c7e3e5578d7a4f
  SGDNS:
    Description: PRCP-NP-DNS-DNSSG-3J5600OVNNBR
    Type: String
    Default: sg-078061ddab53c5c41
  SGRDSMySQL:
    Description: SG-RDSMySQL
    Type: String
    Default: sg-039f822d40c446322
  SGWebServices:
    Description: SG-WebServices
    Type: String
    Default: sg-0a56447308e39b902
  RootVolumeSize:
    Description: Root Volume Size
    Type: String
    Default: 80
  PemKey:
    Description: Name of and existing EC2 KeyPair to enable SSH access to the instance
    Type: String
    Default: KeyPair-Sysco-CloudPricing-NonProd
  CommonAMI:
    Description: SYSCO-GOLD -> ami-0e38f2a5bea6a80ec
    Type: String
    Default: ami-0e38f2a5bea6a80ec
  ApplicationRole:
    Description: Application Role Tag
    Type: String
    Default: Application Server
  CPUReserved:
    Description: The number of cpu units reserved for the container.
    Type: Number
    Default: '4096'
    MinValue: '256'
    MaxValue: '4096'
  MemoryReserved:
    Description: The soft limit (in MiB) of memory to reserve for the container.
    Type: Number
    Default: '8192'
    MinValue: '256'
    MaxValue: '8192'
  RetentionTime:
    Description: The number of days to retain the log events in the specified log group. Possible values are 1, 3, 5, 7, 14, 30, 60, 90, 120, 150, 180, 365, 400, 545, 731, 1827, and 3653.
    Type: Number
    Default: '30'
    MinValue: '1'
    MaxValue: '3653'

Resources:
  MimixDailyPurgeSync001:
    Type: AWS::Events::Rule
    Properties:
      Description: "Mimix Daily Purge Sync for 001"
      Name: "Mimix-Daily-Purge-Sync-EXE-001-Trigger"
      State: DISABLED
      ScheduleExpression: 'cron(30 05 * * ? *)'
      RoleArn: !Ref 'TriggeringRole'
      Targets:
        - Arn: !Ref 'JobQueue'
          Id: EC2
          Input: '{"Parameters": {"business_unit": "001"}}'
          RoleArn: !Ref 'TriggeringRole'
          BatchParameters:
            JobDefinition: !Ref 'JobDefinitionArn'
            JobName: '001-Purge-Sync-Job'

  MimixDailyPurgeSync002:
    Type: AWS::Events::Rule
    Properties:
      Description: "Mimix Daily Purge Sync for 002"
      Name: "Mimix-Daily-Purge-Sync-EXE-002-Trigger"
      State: DISABLED
      ScheduleExpression: 'cron(45 03 * * ? *)'
      RoleArn: !Ref 'TriggeringRole'
      Targets:
        - Arn: !Ref 'JobQueue'
          Id: EC2
          Input: '{"Parameters": {"business_unit": "002"}}'
          RoleArn: !Ref 'TriggeringRole'
          BatchParameters:
            JobDefinition: !Ref 'JobDefinitionArn'
            JobName: '002-Purge-Sync-Job'

  MimixDailyPurgeSync003:
    Type: AWS::Events::Rule
    Properties:
      Description: "Mimix Daily Purge Sync for 003"
      Name: "Mimix-Daily-Purge-Sync-EXE-003-Trigger"
      State: DISABLED
      ScheduleExpression: 'cron(45 03 * * ? *)'
      RoleArn: !Ref 'TriggeringRole'
      Targets:
        - Arn: !Ref 'JobQueue'
          Id: EC2
          Input: '{"Parameters": {"business_unit": "003"}}'
          RoleArn: !Ref 'TriggeringRole'
          BatchParameters:
            JobDefinition: !Ref 'JobDefinitionArn'
            JobName: '003-Purge-Sync-Job'

  MimixDailyPurgeSync004:
    Type: AWS::Events::Rule
    Properties:
      Description: "Mimix Daily Purge Sync for 004"
      Name: "Mimix-Daily-Purge-Sync-EXE-004-Trigger"
      State: DISABLED
      ScheduleExpression: 'cron(40 06 * * ? *)'
      RoleArn: !Ref 'TriggeringRole'
      Targets:
        - Arn: !Ref 'JobQueue'
          Id: EC2
          Input: '{"Parameters": {"business_unit": "004"}}'
          RoleArn: !Ref 'TriggeringRole'
          BatchParameters:
            JobDefinition: !Ref 'JobDefinitionArn'
            JobName: '004-Purge-Sync-Job'

  MimixDailyPurgeSync005:
    Type: AWS::Events::Rule
    Properties:
      Description: "Mimix Daily Purge Sync for 005"
      Name: "Mimix-Daily-Purge-Sync-EXE-005-Trigger"
      State: DISABLED
      ScheduleExpression: 'cron(40 07 * * ? *)'
      RoleArn: !Ref 'TriggeringRole'
      Targets:
        - Arn: !Ref 'JobQueue'
          Id: EC2
          Input: '{"Parameters": {"business_unit": "005"}}'
          RoleArn: !Ref 'TriggeringRole'
          BatchParameters:
            JobDefinition: !Ref 'JobDefinitionArn'
            JobName: '005-Purge-Sync-Job'

  MimixDailyPurgeSync006:
    Type: AWS::Events::Rule
    Properties:
      Description: "Mimix Daily Purge Sync for 006"
      Name: "Mimix-Daily-Purge-Sync-EXE-006-Trigger"
      State: DISABLED
      ScheduleExpression: 'cron(10 05 * * ? *)'
      RoleArn: !Ref 'TriggeringRole'
      Targets:
        - Arn: !Ref 'JobQueue'
          Id: EC2
          Input: '{"Parameters": {"business_unit": "006"}}'
          RoleArn: !Ref 'TriggeringRole'
          BatchParameters:
            JobDefinition: !Ref 'JobDefinitionArn'
            JobName: '006-Purge-Sync-Job'

  MimixDailyPurgeSync007:
    Type: AWS::Events::Rule
    Properties:
      Description: "Mimix Daily Purge Sync for 007"
      Name: "Mimix-Daily-Purge-Sync-EXE-007-Trigger"
      State: DISABLED
      ScheduleExpression: 'cron(50 04 * * ? *)'
      RoleArn: !Ref 'TriggeringRole'
      Targets:
        - Arn: !Ref 'JobQueue'
          Id: EC2
          Input: '{"Parameters": {"business_unit": "007"}}'
          RoleArn: !Ref 'TriggeringRole'
          BatchParameters:
            JobDefinition: !Ref 'JobDefinitionArn'
            JobName: '007-Purge-Sync-Job'

  MimixDailyPurgeSync008:
    Type: AWS::Events::Rule
    Properties:
      Description: "Mimix Daily Purge Sync for 008"
      Name: "Mimix-Daily-Purge-Sync-EXE-008-Trigger"
      State: DISABLED
      ScheduleExpression: 'cron(45 03 * * ? *)'
      RoleArn: !Ref 'TriggeringRole'
      Targets:
        - Arn: !Ref 'JobQueue'
          Id: EC2
          Input: '{"Parameters": {"business_unit": "008"}}'
          RoleArn: !Ref 'TriggeringRole'
          BatchParameters:
            JobDefinition: !Ref 'JobDefinitionArn'
            JobName: '008-Purge-Sync-Job'

  MimixDailyPurgeSync009:
    Type: AWS::Events::Rule
    Properties:
      Description: "Mimix Daily Purge Sync for 009"
      Name: "Mimix-Daily-Purge-Sync-EXE-009-Trigger"
      State: DISABLED
      ScheduleExpression: 'cron(45 03 * * ? *)'
      RoleArn: !Ref 'TriggeringRole'
      Targets:
        - Arn: !Ref 'JobQueue'
          Id: EC2
          Input: '{"Parameters": {"business_unit": "009"}}'
          RoleArn: !Ref 'TriggeringRole'
          BatchParameters:
            JobDefinition: !Ref 'JobDefinitionArn'
            JobName: '009-Purge-Sync-Job'

  MimixDailyPurgeSync010:
    Type: AWS::Events::Rule
    Properties:
      Description: "Mimix Daily Purge Sync for 010"
      Name: "Mimix-Daily-Purge-Sync-EXE-010-Trigger"
      State: DISABLED
      ScheduleExpression: 'cron(45 03 * * ? *)'
      RoleArn: !Ref 'TriggeringRole'
      Targets:
        - Arn: !Ref 'JobQueue'
          Id: EC2
          Input: '{"Parameters": {"business_unit": "010"}}'
          RoleArn: !Ref 'TriggeringRole'
          BatchParameters:
            JobDefinition: !Ref 'JobDefinitionArn'
            JobName: '010-Purge-Sync-Job'

  MimixDailyPurgeSync011:
    Type: AWS::Events::Rule
    Properties:
      Description: "Mimix Daily Purge Sync for 011"
      Name: "Mimix-Daily-Purge-Sync-EXE-011-Trigger"
      State: DISABLED
      ScheduleExpression: 'cron(45 02 * * ? *)'
      RoleArn: !Ref 'TriggeringRole'
      Targets:
        - Arn: !Ref 'JobQueue'
          Id: EC2
          Input: '{"Parameters": {"business_unit": "011"}}'
          RoleArn: !Ref 'TriggeringRole'
          BatchParameters:
            JobDefinition: !Ref 'JobDefinitionArn'
            JobName: '011-Purge-Sync-Job'

  MimixDailyPurgeSync012:
    Type: AWS::Events::Rule
    Properties:
      Description: "Mimix Daily Purge Sync for 012"
      Name: "Mimix-Daily-Purge-Sync-EXE-012-Trigger"
      State: DISABLED
      ScheduleExpression: 'cron(10 03 * * ? *)'
      RoleArn: !Ref 'TriggeringRole'
      Targets:
        - Arn: !Ref 'JobQueue'
          Id: EC2
          Input: '{"Parameters": {"business_unit": "012"}}'
          RoleArn: !Ref 'TriggeringRole'
          BatchParameters:
            JobDefinition: !Ref 'JobDefinitionArn'
            JobName: '012-Purge-Sync-Job'

  MimixDailyPurgeSync013:
    Type: AWS::Events::Rule
    Properties:
      Description: "Mimix Daily Purge Sync for 013"
      Name: "Mimix-Daily-Purge-Sync-EXE-013-Trigger"
      State: DISABLED
      ScheduleExpression: 'cron(10 04 * * ? *)'
      RoleArn: !Ref 'TriggeringRole'
      Targets:
        - Arn: !Ref 'JobQueue'
          Id: EC2
          Input: '{"Parameters": {"business_unit": "013"}}'
          RoleArn: !Ref 'TriggeringRole'
          BatchParameters:
            JobDefinition: !Ref 'JobDefinitionArn'
            JobName: '013-Purge-Sync-Job'

  MimixDailyPurgeSync014:
    Type: AWS::Events::Rule
    Properties:
      Description: "Mimix Daily Purge Sync for 014"
      Name: "Mimix-Daily-Purge-Sync-EXE-014-Trigger"
      State: DISABLED
      ScheduleExpression: 'cron(50 05 * * ? *)'
      RoleArn: !Ref 'TriggeringRole'
      Targets:
        - Arn: !Ref 'JobQueue'
          Id: EC2
          Input: '{"Parameters": {"business_unit": "014"}}'
          RoleArn: !Ref 'TriggeringRole'
          BatchParameters:
            JobDefinition: !Ref 'JobDefinitionArn'
            JobName: '014-Purge-Sync-Job'

  MimixDailyPurgeSync015:
    Type: AWS::Events::Rule
    Properties:
      Description: "Mimix Daily Purge Sync for 015"
      Name: "Mimix-Daily-Purge-Sync-EXE-015-Trigger"
      State: DISABLED
      ScheduleExpression: 'cron(00 03 * * ? *)'
      RoleArn: !Ref 'TriggeringRole'
      Targets:
        - Arn: !Ref 'JobQueue'
          Id: EC2
          Input: '{"Parameters": {"business_unit": "015"}}'
          RoleArn: !Ref 'TriggeringRole'
          BatchParameters:
            JobDefinition: !Ref 'JobDefinitionArn'
            JobName: '015-Purge-Sync-Job'

  MimixDailyPurgeSync016:
    Type: AWS::Events::Rule
    Properties:
      Description: "Mimix Daily Purge Sync for 016"
      Name: "Mimix-Daily-Purge-Sync-EXE-016-Trigger"
      State: DISABLED
      ScheduleExpression: 'cron(15 03 * * ? *)'
      RoleArn: !Ref 'TriggeringRole'
      Targets:
        - Arn: !Ref 'JobQueue'
          Id: EC2
          Input: '{"Parameters": {"business_unit": "016"}}'
          RoleArn: !Ref 'TriggeringRole'
          BatchParameters:
            JobDefinition: !Ref 'JobDefinitionArn'
            JobName: '016-Purge-Sync-Job'

  MimixDailyPurgeSync017:
    Type: AWS::Events::Rule
    Properties:
      Description: "Mimix Daily Purge Sync for 017"
      Name: "Mimix-Daily-Purge-Sync-EXE-017-Trigger"
      State: DISABLED
      ScheduleExpression: 'cron(20 07 * * ? *)'
      RoleArn: !Ref 'TriggeringRole'
      Targets:
        - Arn: !Ref 'JobQueue'
          Id: EC2
          Input: '{"Parameters": {"business_unit": "017"}}'
          RoleArn: !Ref 'TriggeringRole'
          BatchParameters:
            JobDefinition: !Ref 'JobDefinitionArn'
            JobName: '017-Purge-Sync-Job'

  MimixDailyPurgeSync018:
    Type: AWS::Events::Rule
    Properties:
      Description: "Mimix Daily Purge Sync for 018"
      Name: "Mimix-Daily-Purge-Sync-EXE-018-Trigger"
      State: DISABLED
      ScheduleExpression: 'cron(55 05 * * ? *)'
      RoleArn: !Ref 'TriggeringRole'
      Targets:
        - Arn: !Ref 'JobQueue'
          Id: EC2
          Input: '{"Parameters": {"business_unit": "018"}}'
          RoleArn: !Ref 'TriggeringRole'
          BatchParameters:
            JobDefinition: !Ref 'JobDefinitionArn'
            JobName: '018-Purge-Sync-Job'

  MimixDailyPurgeSync019:
    Type: AWS::Events::Rule
    Properties:
      Description: "Mimix Daily Purge Sync for 019"
      Name: "Mimix-Daily-Purge-Sync-EXE-019-Trigger"
      State: DISABLED
      ScheduleExpression: 'cron(20 03 * * ? *)'
      RoleArn: !Ref 'TriggeringRole'
      Targets:
        - Arn: !Ref 'JobQueue'
          Id: EC2
          Input: '{"Parameters": {"business_unit": "019"}}'
          RoleArn: !Ref 'TriggeringRole'
          BatchParameters:
            JobDefinition: !Ref 'JobDefinitionArn'
            JobName: '019-Purge-Sync-Job'

  MimixDailyPurgeSync022:
    Type: AWS::Events::Rule
    Properties:
      Description: "Mimix Daily Purge Sync for 022"
      Name: "Mimix-Daily-Purge-Sync-EXE-022-Trigger"
      State: DISABLED
      ScheduleExpression: 'cron(30 03 * * ? *)'
      RoleArn: !Ref 'TriggeringRole'
      Targets:
        - Arn: !Ref 'JobQueue'
          Id: EC2
          Input: '{"Parameters": {"business_unit": "022"}}'
          RoleArn: !Ref 'TriggeringRole'
          BatchParameters:
            JobDefinition: !Ref 'JobDefinitionArn'
            JobName: '022-Purge-Sync-Job'

  MimixDailyPurgeSync023:
    Type: AWS::Events::Rule
    Properties:
      Description: "Mimix Daily Purge Sync for 023"
      Name: "Mimix-Daily-Purge-Sync-EXE-023-Trigger"
      State: DISABLED
      ScheduleExpression: 'cron(35 05 * * ? *)'
      RoleArn: !Ref 'TriggeringRole'
      Targets:
        - Arn: !Ref 'JobQueue'
          Id: EC2
          Input: '{"Parameters": {"business_unit": "023"}}'
          RoleArn: !Ref 'TriggeringRole'
          BatchParameters:
            JobDefinition: !Ref 'JobDefinitionArn'
            JobName: '023-Purge-Sync-Job'

  MimixDailyPurgeSync024:
    Type: AWS::Events::Rule
    Properties:
      Description: "Mimix Daily Purge Sync for 024"
      Name: "Mimix-Daily-Purge-Sync-EXE-024-Trigger"
      State: DISABLED
      ScheduleExpression: 'cron(05 06 * * ? *)'
      RoleArn: !Ref 'TriggeringRole'
      Targets:
        - Arn: !Ref 'JobQueue'
          Id: EC2
          Input: '{"Parameters": {"business_unit": "024"}}'
          RoleArn: !Ref 'TriggeringRole'
          BatchParameters:
            JobDefinition: !Ref 'JobDefinitionArn'
            JobName: '024-Purge-Sync-Job'

  MimixDailyPurgeSync025:
    Type: AWS::Events::Rule
    Properties:
      Description: "Mimix Daily Purge Sync for 025"
      Name: "Mimix-Daily-Purge-Sync-EXE-025-Trigger"
      State: DISABLED
      ScheduleExpression: 'cron(35 03 * * ? *)'
      RoleArn: !Ref 'TriggeringRole'
      Targets:
        - Arn: !Ref 'JobQueue'
          Id: EC2
          Input: '{"Parameters": {"business_unit": "025"}}'
          RoleArn: !Ref 'TriggeringRole'
          BatchParameters:
            JobDefinition: !Ref 'JobDefinitionArn'
            JobName: '025-Purge-Sync-Job'

  MimixDailyPurgeSync026:
    Type: AWS::Events::Rule
    Properties:
      Description: "Mimix Daily Purge Sync for 026"
      Name: "Mimix-Daily-Purge-Sync-EXE-026-Trigger"
      State: DISABLED
      ScheduleExpression: 'cron(10 06 * * ? *)'
      RoleArn: !Ref 'TriggeringRole'
      Targets:
        - Arn: !Ref 'JobQueue'
          Id: EC2
          Input: '{"Parameters": {"business_unit": "026"}}'
          RoleArn: !Ref 'TriggeringRole'
          BatchParameters:
            JobDefinition: !Ref 'JobDefinitionArn'
            JobName: '026-Purge-Sync-Job'

  MimixDailyPurgeSync027:
    Type: AWS::Events::Rule
    Properties:
      Description: "Mimix Daily Purge Sync for 027"
      Name: "Mimix-Daily-Purge-Sync-EXE-027-Trigger"
      State: DISABLED
      ScheduleExpression: 'cron(40 03 * * ? *)'
      RoleArn: !Ref 'TriggeringRole'
      Targets:
        - Arn: !Ref 'JobQueue'
          Id: EC2
          Input: '{"Parameters": {"business_unit": "027"}}'
          RoleArn: !Ref 'TriggeringRole'
          BatchParameters:
            JobDefinition: !Ref 'JobDefinitionArn'
            JobName: '027-Purge-Sync-Job'

  MimixDailyPurgeSync031:
    Type: AWS::Events::Rule
    Properties:
      Description: "Mimix Daily Purge Sync for 031"
      Name: "Mimix-Daily-Purge-Sync-EXE-031-Trigger"
      State: DISABLED
      ScheduleExpression: 'cron(00 07 * * ? *)'
      RoleArn: !Ref 'TriggeringRole'
      Targets:
        - Arn: !Ref 'JobQueue'
          Id: EC2
          Input: '{"Parameters": {"business_unit": "031"}}'
          RoleArn: !Ref 'TriggeringRole'
          BatchParameters:
            JobDefinition: !Ref 'JobDefinitionArn'
            JobName: '031-Purge-Sync-Job'

  MimixDailyPurgeSync029:
    Type: AWS::Events::Rule
    Properties:
      Description: "Mimix Daily Purge Sync for 029"
      Name: "Mimix-Daily-Purge-Sync-EXE-029-Trigger"
      State: DISABLED
      ScheduleExpression: 'cron(20 06 * * ? *)'
      RoleArn: !Ref 'TriggeringRole'
      Targets:
        - Arn: !Ref 'JobQueue'
          Id: EC2
          Input: '{"Parameters": {"business_unit": "029"}}'
          RoleArn: !Ref 'TriggeringRole'
          BatchParameters:
            JobDefinition: !Ref 'JobDefinitionArn'
            JobName: '029-Purge-Sync-Job'

  MimixDailyPurgeSync032:
    Type: AWS::Events::Rule
    Properties:
      Description: "Mimix Daily Purge Sync for 032"
      Name: "Mimix-Daily-Purge-Sync-EXE-032-Trigger"
      State: DISABLED
      ScheduleExpression: 'cron(50 03 * * ? *)'
      RoleArn: !Ref 'TriggeringRole'
      Targets:
        - Arn: !Ref 'JobQueue'
          Id: EC2
          Input: '{"Parameters": {"business_unit": "032"}}'
          RoleArn: !Ref 'TriggeringRole'
          BatchParameters:
            JobDefinition: !Ref 'JobDefinitionArn'
            JobName: '032-Purge-Sync-Job'

  MimixDailyPurgeSync035:
    Type: AWS::Events::Rule
    Properties:
      Description: "Mimix Daily Purge Sync for 035"
      Name: "Mimix-Daily-Purge-Sync-EXE-035-Trigger"
      State: DISABLED
      ScheduleExpression: 'cron(25 06 * * ? *)'
      RoleArn: !Ref 'TriggeringRole'
      Targets:
        - Arn: !Ref 'JobQueue'
          Id: EC2
          Input: '{"Parameters": {"business_unit": "035"}}'
          RoleArn: !Ref 'TriggeringRole'
          BatchParameters:
            JobDefinition: !Ref 'JobDefinitionArn'
            JobName: '035-Purge-Sync-Job'

  MimixDailyPurgeSync036:
    Type: AWS::Events::Rule
    Properties:
      Description: "Mimix Daily Purge Sync for 036"
      Name: "Mimix-Daily-Purge-Sync-EXE-036-Trigger"
      State: DISABLED
      ScheduleExpression: 'cron(25 07 * * ? *)'
      RoleArn: !Ref 'TriggeringRole'
      Targets:
        - Arn: !Ref 'JobQueue'
          Id: EC2
          Input: '{"Parameters": {"business_unit": "036"}}'
          RoleArn: !Ref 'TriggeringRole'
          BatchParameters:
            JobDefinition: !Ref 'JobDefinitionArn'
            JobName: '036-Purge-Sync-Job'

  MimixDailyPurgeSync037:
    Type: AWS::Events::Rule
    Properties:
      Description: "Mimix Daily Purge Sync for 037"
      Name: "Mimix-Daily-Purge-Sync-EXE-037-Trigger"
      State: DISABLED
      ScheduleExpression: 'cron(15 04 * * ? *)'
      RoleArn: !Ref 'TriggeringRole'
      Targets:
        - Arn: !Ref 'JobQueue'
          Id: EC2
          Input: '{"Parameters": {"business_unit": "037"}}'
          RoleArn: !Ref 'TriggeringRole'
          BatchParameters:
            JobDefinition: !Ref 'JobDefinitionArn'
            JobName: '037-Purge-Sync-Job'

  MimixDailyPurgeSync038:
    Type: AWS::Events::Rule
    Properties:
      Description: "Mimix Daily Purge Sync for 038"
      Name: "Mimix-Daily-Purge-Sync-EXE-038-Trigger"
      State: DISABLED
      ScheduleExpression: 'cron(05 03 * * ? *)'
      RoleArn: !Ref 'TriggeringRole'
      Targets:
        - Arn: !Ref 'JobQueue'
          Id: EC2
          Input: '{"Parameters": {"business_unit": "038"}}'
          RoleArn: !Ref 'TriggeringRole'
          BatchParameters:
            JobDefinition: !Ref 'JobDefinitionArn'
            JobName: '038-Purge-Sync-Job'

  MimixDailyPurgeSync039:
    Type: AWS::Events::Rule
    Properties:
      Description: "Mimix Daily Purge Sync for 039"
      Name: "Mimix-Daily-Purge-Sync-EXE-039-Trigger"
      State: DISABLED
      ScheduleExpression: 'cron(00 06 * * ? *)'
      RoleArn: !Ref 'TriggeringRole'
      Targets:
        - Arn: !Ref 'JobQueue'
          Id: EC2
          Input: '{"Parameters": {"business_unit": "039"}}'
          RoleArn: !Ref 'TriggeringRole'
          BatchParameters:
            JobDefinition: !Ref 'JobDefinitionArn'
            JobName: '039-Purge-Sync-Job'

  MimixDailyPurgeSync040:
    Type: AWS::Events::Rule
    Properties:
      Description: "Mimix Daily Purge Sync for 040"
      Name: "Mimix-Daily-Purge-Sync-EXE-040-Trigger"
      State: DISABLED
      ScheduleExpression: 'cron(45 07 * * ? *)'
      RoleArn: !Ref 'TriggeringRole'
      Targets:
        - Arn: !Ref 'JobQueue'
          Id: EC2
          Input: '{"Parameters": {"business_unit": "040"}}'
          RoleArn: !Ref 'TriggeringRole'
          BatchParameters:
            JobDefinition: !Ref 'JobDefinitionArn'
            JobName: '040-Purge-Sync-Job'

  MimixDailyPurgeSync043:
    Type: AWS::Events::Rule
    Properties:
      Description: "Mimix Daily Purge Sync for 043"
      Name: "Mimix-Daily-Purge-Sync-EXE-043-Trigger"
      State: DISABLED
      ScheduleExpression: 'cron(00 08 * * ? *)'
      RoleArn: !Ref 'TriggeringRole'
      Targets:
        - Arn: !Ref 'JobQueue'
          Id: EC2
          Input: '{"Parameters": {"business_unit": "043"}}'
          RoleArn: !Ref 'TriggeringRole'
          BatchParameters:
            JobDefinition: !Ref 'JobDefinitionArn'
            JobName: '043-Purge-Sync-Job'

  MimixDailyPurgeSync045:
    Type: AWS::Events::Rule
    Properties:
      Description: "Mimix Daily Purge Sync for 045"
      Name: "Mimix-Daily-Purge-Sync-EXE-045-Trigger"
      State: DISABLED
      ScheduleExpression: 'cron(50 07 * * ? *)'
      RoleArn: !Ref 'TriggeringRole'
      Targets:
        - Arn: !Ref 'JobQueue'
          Id: EC2
          Input: '{"Parameters": {"business_unit": "045"}}'
          RoleArn: !Ref 'TriggeringRole'
          BatchParameters:
            JobDefinition: !Ref 'JobDefinitionArn'
            JobName: '045-Purge-Sync-Job'

  MimixDailyPurgeSync046:
    Type: AWS::Events::Rule
    Properties:
      Description: "Mimix Daily Purge Sync for 046"
      Name: "Mimix-Daily-Purge-Sync-EXE-046-Trigger"
      State: DISABLED
      ScheduleExpression: 'cron(45 06 * * ? *)'
      RoleArn: !Ref 'TriggeringRole'
      Targets:
        - Arn: !Ref 'JobQueue'
          Id: EC2
          Input: '{"Parameters": {"business_unit": "046"}}'
          RoleArn: !Ref 'TriggeringRole'
          BatchParameters:
            JobDefinition: !Ref 'JobDefinitionArn'
            JobName: '046-Purge-Sync-Job'

  MimixDailyPurgeSync047:
    Type: AWS::Events::Rule
    Properties:
      Description: "Mimix Daily Purge Sync for 047"
      Name: "Mimix-Daily-Purge-Sync-EXE-047-Trigger"
      State: DISABLED
      ScheduleExpression: 'cron(15 06 * * ? *)'
      RoleArn: !Ref 'TriggeringRole'
      Targets:
        - Arn: !Ref 'JobQueue'
          Id: EC2
          Input: '{"Parameters": {"business_unit": "047"}}'
          RoleArn: !Ref 'TriggeringRole'
          BatchParameters:
            JobDefinition: !Ref 'JobDefinitionArn'
            JobName: '047-Purge-Sync-Job'

  MimixDailyPurgeSync048:
    Type: AWS::Events::Rule
    Properties:
      Description: "Mimix Daily Purge Sync for 048"
      Name: "Mimix-Daily-Purge-Sync-EXE-048-Trigger"
      State: DISABLED
      ScheduleExpression: 'cron(55 03 * * ? *)'
      RoleArn: !Ref 'TriggeringRole'
      Targets:
        - Arn: !Ref 'JobQueue'
          Id: EC2
          Input: '{"Parameters": {"business_unit": "048"}}'
          RoleArn: !Ref 'TriggeringRole'
          BatchParameters:
            JobDefinition: !Ref 'JobDefinitionArn'
            JobName: '048-Purge-Sync-Job'

  MimixDailyPurgeSync049:
    Type: AWS::Events::Rule
    Properties:
      Description: "Mimix Daily Purge Sync for 049"
      Name: "Mimix-Daily-Purge-Sync-EXE-049-Trigger"
      State: DISABLED
      ScheduleExpression: 'cron(30 06 * * ? *)'
      RoleArn: !Ref 'TriggeringRole'
      Targets:
        - Arn: !Ref 'JobQueue'
          Id: EC2
          Input: '{"Parameters": {"business_unit": "049"}}'
          RoleArn: !Ref 'TriggeringRole'
          BatchParameters:
            JobDefinition: !Ref 'JobDefinitionArn'
            JobName: '049-Purge-Sync-Job'

  MimixDailyPurgeSync050:
    Type: AWS::Events::Rule
    Properties:
      Description: "Mimix Daily Purge Sync for 050"
      Name: "Mimix-Daily-Purge-Sync-EXE-050-Trigger"
      State: DISABLED
      ScheduleExpression: 'cron(05 08 * * ? *)'
      RoleArn: !Ref 'TriggeringRole'
      Targets:
        - Arn: !Ref 'JobQueue'
          Id: EC2
          Input: '{"Parameters": {"business_unit": "050"}}'
          RoleArn: !Ref 'TriggeringRole'
          BatchParameters:
            JobDefinition: !Ref 'JobDefinitionArn'
            JobName: '050-Purge-Sync-Job'

  MimixDailyPurgeSync051:
    Type: AWS::Events::Rule
    Properties:
      Description: "Mimix Daily Purge Sync for 051"
      Name: "Mimix-Daily-Purge-Sync-EXE-051-Trigger"
      State: DISABLED
      ScheduleExpression: 'cron(30 04 * * ? *)'
      RoleArn: !Ref 'TriggeringRole'
      Targets:
        - Arn: !Ref 'JobQueue'
          Id: EC2
          Input: '{"Parameters": {"business_unit": "051"}}'
          RoleArn: !Ref 'TriggeringRole'
          BatchParameters:
            JobDefinition: !Ref 'JobDefinitionArn'
            JobName: '051-Purge-Sync-Job'

  MimixDailyPurgeSync052:
    Type: AWS::Events::Rule
    Properties:
      Description: "Mimix Daily Purge Sync for 052"
      Name: "Mimix-Daily-Purge-Sync-EXE-052-Trigger"
      State: DISABLED
      ScheduleExpression: 'cron(20 08 * * ? *)'
      RoleArn: !Ref 'TriggeringRole'
      Targets:
        - Arn: !Ref 'JobQueue'
          Id: EC2
          Input: '{"Parameters": {"business_unit": "052"}}'
          RoleArn: !Ref 'TriggeringRole'
          BatchParameters:
            JobDefinition: !Ref 'JobDefinitionArn'
            JobName: '052-Purge-Sync-Job'

  MimixDailyPurgeSync054:
    Type: AWS::Events::Rule
    Properties:
      Description: "Mimix Daily Purge Sync for 054"
      Name: "Mimix-Daily-Purge-Sync-EXE-054-Trigger"
      State: DISABLED
      ScheduleExpression: 'cron(55 04 * * ? *)'
      RoleArn: !Ref 'TriggeringRole'
      Targets:
        - Arn: !Ref 'JobQueue'
          Id: EC2
          Input: '{"Parameters": {"business_unit": "054"}}'
          RoleArn: !Ref 'TriggeringRole'
          BatchParameters:
            JobDefinition: !Ref 'JobDefinitionArn'
            JobName: '054-Purge-Sync-Job'

  MimixDailyPurgeSync056:
    Type: AWS::Events::Rule
    Properties:
      Description: "Mimix Daily Purge Sync for 056"
      Name: "Mimix-Daily-Purge-Sync-EXE-056-Trigger"
      State: DISABLED
      ScheduleExpression: 'cron(55 07 * * ? *)'
      RoleArn: !Ref 'TriggeringRole'
      Targets:
        - Arn: !Ref 'JobQueue'
          Id: EC2
          Input: '{"Parameters": {"business_unit": "056"}}'
          RoleArn: !Ref 'TriggeringRole'
          BatchParameters:
            JobDefinition: !Ref 'JobDefinitionArn'
            JobName: '056-Purge-Sync-Job'

  MimixDailyPurgeSync055:
    Type: AWS::Events::Rule
    Properties:
      Description: "Mimix Daily Purge Sync for 055"
      Name: "Mimix-Daily-Purge-Sync-EXE-055-Trigger"
      State: DISABLED
      ScheduleExpression: 'cron(15 05 * * ? *)'
      RoleArn: !Ref 'TriggeringRole'
      Targets:
        - Arn: !Ref 'JobQueue'
          Id: EC2
          Input: '{"Parameters": {"business_unit": "055"}}'
          RoleArn: !Ref 'TriggeringRole'
          BatchParameters:
            JobDefinition: !Ref 'JobDefinitionArn'
            JobName: '055-Purge-Sync-Job'

  MimixDailyPurgeSync057:
    Type: AWS::Events::Rule
    Properties:
      Description: "Mimix Daily Purge Sync for 057"
      Name: "Mimix-Daily-Purge-Sync-EXE-057-Trigger"
      State: DISABLED
      ScheduleExpression: 'cron(35 04 * * ? *)'
      RoleArn: !Ref 'TriggeringRole'
      Targets:
        - Arn: !Ref 'JobQueue'
          Id: EC2
          Input: '{"Parameters": {"business_unit": "057"}}'
          RoleArn: !Ref 'TriggeringRole'
          BatchParameters:
            JobDefinition: !Ref 'JobDefinitionArn'
            JobName: '057-Purge-Sync-Job'

  MimixDailyPurgeSync058:
    Type: AWS::Events::Rule
    Properties:
      Description: "Mimix Daily Purge Sync for 058"
      Name: "Mimix-Daily-Purge-Sync-EXE-058-Trigger"
      State: DISABLED
      ScheduleExpression: 'cron(00 04 * * ? *)'
      RoleArn: !Ref 'TriggeringRole'
      Targets:
        - Arn: !Ref 'JobQueue'
          Id: EC2
          Input: '{"Parameters": {"business_unit": "058"}}'
          RoleArn: !Ref 'TriggeringRole'
          BatchParameters:
            JobDefinition: !Ref 'JobDefinitionArn'
            JobName: '058-Purge-Sync-Job'

  MimixDailyPurgeSync059:
    Type: AWS::Events::Rule
    Properties:
      Description: "Mimix Daily Purge Sync for 059"
      Name: "Mimix-Daily-Purge-Sync-EXE-059-Trigger"
      State: DISABLED
      ScheduleExpression: 'cron(10 08 * * ? *)'
      RoleArn: !Ref 'TriggeringRole'
      Targets:
        - Arn: !Ref 'JobQueue'
          Id: EC2
          Input: '{"Parameters": {"business_unit": "059"}}'
          RoleArn: !Ref 'TriggeringRole'
          BatchParameters:
            JobDefinition: !Ref 'JobDefinitionArn'
            JobName: '059-Purge-Sync-Job'

  MimixDailyPurgeSync060:
    Type: AWS::Events::Rule
    Properties:
      Description: "Mimix Daily Purge Sync for 060"
      Name: "Mimix-Daily-Purge-Sync-EXE-060-Trigger"
      State: DISABLED
      ScheduleExpression: 'cron(00 05 * * ? *)'
      RoleArn: !Ref 'TriggeringRole'
      Targets:
        - Arn: !Ref 'JobQueue'
          Id: EC2
          Input: '{"Parameters": {"business_unit": "060"}}'
          RoleArn: !Ref 'TriggeringRole'
          BatchParameters:
            JobDefinition: !Ref 'JobDefinitionArn'
            JobName: '060-Purge-Sync-Job'

  MimixDailyPurgeSync061:
    Type: AWS::Events::Rule
    Properties:
      Description: "Mimix Daily Purge Sync for 061"
      Name: "Mimix-Daily-Purge-Sync-EXE-061-Trigger"
      State: DISABLED
      ScheduleExpression: 'cron(05 07 * * ? *)'
      RoleArn: !Ref 'TriggeringRole'
      Targets:
        - Arn: !Ref 'JobQueue'
          Id: EC2
          Input: '{"Parameters": {"business_unit": "061"}}'
          RoleArn: !Ref 'TriggeringRole'
          BatchParameters:
            JobDefinition: !Ref 'JobDefinitionArn'
            JobName: '061-Purge-Sync-Job'

  MimixDailyPurgeSync064:
    Type: AWS::Events::Rule
    Properties:
      Description: "Mimix Daily Purge Sync for 064"
      Name: "Mimix-Daily-Purge-Sync-EXE-064-Trigger"
      State: DISABLED
      ScheduleExpression: 'cron(20 05 * * ? *)'
      RoleArn: !Ref 'TriggeringRole'
      Targets:
        - Arn: !Ref 'JobQueue'
          Id: EC2
          Input: '{"Parameters": {"business_unit": "064"}}'
          RoleArn: !Ref 'TriggeringRole'
          BatchParameters:
            JobDefinition: !Ref 'JobDefinitionArn'
            JobName: '064-Purge-Sync-Job'

  MimixDailyPurgeSync066:
    Type: AWS::Events::Rule
    Properties:
      Description: "Mimix Daily Purge Sync for 066"
      Name: "Mimix-Daily-Purge-Sync-EXE-066-Trigger"
      State: DISABLED
      ScheduleExpression: 'cron(25 08 * * ? *)'
      RoleArn: !Ref 'TriggeringRole'
      Targets:
        - Arn: !Ref 'JobQueue'
          Id: EC2
          Input: '{"Parameters": {"business_unit": "066"}}'
          RoleArn: !Ref 'TriggeringRole'
          BatchParameters:
            JobDefinition: !Ref 'JobDefinitionArn'
            JobName: '066-Purge-Sync-Job'

  MimixDailyPurgeSync067:
    Type: AWS::Events::Rule
    Properties:
      Description: "Mimix Daily Purge Sync for 067"
      Name: "Mimix-Daily-Purge-Sync-EXE-067-Trigger"
      State: DISABLED
      ScheduleExpression: 'cron(10 07 * * ? *)'
      RoleArn: !Ref 'TriggeringRole'
      Targets:
        - Arn: !Ref 'JobQueue'
          Id: EC2
          Input: '{"Parameters": {"business_unit": "067"}}'
          RoleArn: !Ref 'TriggeringRole'
          BatchParameters:
            JobDefinition: !Ref 'JobDefinitionArn'
            JobName: '067-Purge-Sync-Job'

  MimixDailyPurgeSync068:
    Type: AWS::Events::Rule
    Properties:
      Description: "Mimix Daily Purge Sync for 068"
      Name: "Mimix-Daily-Purge-Sync-EXE-068-Trigger"
      State: DISABLED
      ScheduleExpression: 'cron(20 04 * * ? *)'
      RoleArn: !Ref 'TriggeringRole'
      Targets:
        - Arn: !Ref 'JobQueue'
          Id: EC2
          Input: '{"Parameters": {"business_unit": "068"}}'
          RoleArn: !Ref 'TriggeringRole'
          BatchParameters:
            JobDefinition: !Ref 'JobDefinitionArn'
            JobName: '068-Purge-Sync-Job'

  MimixDailyPurgeSync073:
    Type: AWS::Events::Rule
    Properties:
      Description: "Mimix Daily Purge Sync for 073"
      Name: "Mimix-Daily-Purge-Sync-EXE-073-Trigger"
      State: DISABLED
      ScheduleExpression: 'cron(40 05 * * ? *)'
      RoleArn: !Ref 'TriggeringRole'
      Targets:
        - Arn: !Ref 'JobQueue'
          Id: EC2
          Input: '{"Parameters": {"business_unit": "073"}}'
          RoleArn: !Ref 'TriggeringRole'
          BatchParameters:
            JobDefinition: !Ref 'JobDefinitionArn'
            JobName: '073-Purge-Sync-Job'

  MimixDailyPurgeSync075:
    Type: AWS::Events::Rule
    Properties:
      Description: "Mimix Daily Purge Sync for 075"
      Name: "Mimix-Daily-Purge-Sync-EXE-075-Trigger"
      State: DISABLED
      ScheduleExpression: 'cron(25 04 * * ? *)'
      RoleArn: !Ref 'TriggeringRole'
      Targets:
        - Arn: !Ref 'JobQueue'
          Id: EC2
          Input: '{"Parameters": {"business_unit": "075"}}'
          RoleArn: !Ref 'TriggeringRole'
          BatchParameters:
            JobDefinition: !Ref 'JobDefinitionArn'
            JobName: '075-Purge-Sync-Job'

  MimixDailyPurgeSync076:
    Type: AWS::Events::Rule
    Properties:
      Description: "Mimix Daily Purge Sync for 076"
      Name: "Mimix-Daily-Purge-Sync-EXE-076-Trigger"
      State: DISABLED
      ScheduleExpression: 'cron(40 04 * * ? *)'
      RoleArn: !Ref 'TriggeringRole'
      Targets:
        - Arn: !Ref 'JobQueue'
          Id: EC2
          Input: '{"Parameters": {"business_unit": "076"}}'
          RoleArn: !Ref 'TriggeringRole'
          BatchParameters:
            JobDefinition: !Ref 'JobDefinitionArn'
            JobName: '076-Purge-Sync-Job'

  MimixDailyPurgeSync078:
    Type: AWS::Events::Rule
    Properties:
      Description: "Mimix Daily Purge Sync for 078"
      Name: "Mimix-Daily-Purge-Sync-EXE-078-Trigger"
      State: DISABLED
      ScheduleExpression: 'cron(35 06 * * ? *)'
      RoleArn: !Ref 'TriggeringRole'
      Targets:
        - Arn: !Ref 'JobQueue'
          Id: EC2
          Input: '{"Parameters": {"business_unit": "078"}}'
          RoleArn: !Ref 'TriggeringRole'
          BatchParameters:
            JobDefinition: !Ref 'JobDefinitionArn'
            JobName: '078-Purge-Sync-Job'

  MimixDailyPurgeSync101:
    Type: AWS::Events::Rule
    Properties:
      Description: "Mimix Daily Purge Sync for 101"
      Name: "Mimix-Daily-Purge-Sync-EXE-101-Trigger"
      State: DISABLED
      ScheduleExpression: 'cron(15 08 * * ? *)'
      RoleArn: !Ref 'TriggeringRole'
      Targets:
        - Arn: !Ref 'JobQueue'
          Id: EC2
          Input: '{"Parameters": {"business_unit": "101"}}'
          RoleArn: !Ref 'TriggeringRole'
          BatchParameters:
            JobDefinition: !Ref 'JobDefinitionArn'
            JobName: '101-Purge-Sync-Job'

  MimixDailyPurgeSync102:
    Type: AWS::Events::Rule
    Properties:
      Description: "Mimix Daily Purge Sync for 102"
      Name: "Mimix-Daily-Purge-Sync-EXE-102-Trigger"
      State: DISABLED
      ScheduleExpression: 'cron(40 08 * * ? *)'
      RoleArn: !Ref 'TriggeringRole'
      Targets:
        - Arn: !Ref 'JobQueue'
          Id: EC2
          Input: '{"Parameters": {"business_unit": "102"}}'
          RoleArn: !Ref 'TriggeringRole'
          BatchParameters:
            JobDefinition: !Ref 'JobDefinitionArn'
            JobName: '102-Purge-Sync-Job'

  MimixDailyPurgeSync134:
    Type: AWS::Events::Rule
    Properties:
      Description: "Mimix Daily Purge Sync for 134"
      Name: "Mimix-Daily-Purge-Sync-EXE-134-Trigger"
      State: DISABLED
      ScheduleExpression: 'cron(25 03 * * ? *)'
      RoleArn: !Ref 'TriggeringRole'
      Targets:
        - Arn: !Ref 'JobQueue'
          Id: EC2
          Input: '{"Parameters": {"business_unit": "134"}}'
          RoleArn: !Ref 'TriggeringRole'
          BatchParameters:
            JobDefinition: !Ref 'JobDefinitionArn'
            JobName: '134-Purge-Sync-Job'

  MimixDailyPurgeSync137:
    Type: AWS::Events::Rule
    Properties:
      Description: "Mimix Daily Purge Sync for 137"
      Name: "Mimix-Daily-Purge-Sync-EXE-137-Trigger"
      State: DISABLED
      ScheduleExpression: 'cron(05 05 * * ? *)'
      RoleArn: !Ref 'TriggeringRole'
      Targets:
        - Arn: !Ref 'JobQueue'
          Id: EC2
          Input: '{"Parameters": {"business_unit": "137"}}'
          RoleArn: !Ref 'TriggeringRole'
          BatchParameters:
            JobDefinition: !Ref 'JobDefinitionArn'
            JobName: '137-Purge-Sync-Job'

  MimixDailyPurgeSync163:
    Type: AWS::Events::Rule
    Properties:
      Description: "Mimix Daily Purge Sync for 163"
      Name: "Mimix-Daily-Purge-Sync-EXE-163-Trigger"
      State: DISABLED
      ScheduleExpression: 'cron(25 05 * * ? *)'
      RoleArn: !Ref 'TriggeringRole'
      Targets:
        - Arn: !Ref 'JobQueue'
          Id: EC2
          Input: '{"Parameters": {"business_unit": "163"}}'
          RoleArn: !Ref 'TriggeringRole'
          BatchParameters:
            JobDefinition: !Ref 'JobDefinitionArn'
            JobName: '163-Purge-Sync-Job'

  MimixDailyPurgeSync164:
    Type: AWS::Events::Rule
    Properties:
      Description: "Mimix Daily Purge Sync for 164"
      Name: "Mimix-Daily-Purge-Sync-EXE-164-Trigger"
      State: DISABLED
      ScheduleExpression: 'cron(50 06 * * ? *)'
      RoleArn: !Ref 'TriggeringRole'
      Targets:
        - Arn: !Ref 'JobQueue'
          Id: EC2
          Input: '{"Parameters": {"business_unit": "164"}}'
          RoleArn: !Ref 'TriggeringRole'
          BatchParameters:
            JobDefinition: !Ref 'JobDefinitionArn'
            JobName: '164-Purge-Sync-Job'

  MimixDailyPurgeSync194:
    Type: AWS::Events::Rule
    Properties:
      Description: "Mimix Daily Purge Sync for 194"
      Name: "Mimix-Daily-Purge-Sync-EXE-194-Trigger"
      State: DISABLED
      ScheduleExpression: 'cron(45 05 * * ? *)'
      RoleArn: !Ref 'TriggeringRole'
      Targets:
        - Arn: !Ref 'JobQueue'
          Id: EC2
          Input: '{"Parameters": {"business_unit": "194"}}'
          RoleArn: !Ref 'TriggeringRole'
          BatchParameters:
            JobDefinition: !Ref 'JobDefinitionArn'
            JobName: '194-Purge-Sync-Job'

  MimixDailyPurgeSync195:
    Type: AWS::Events::Rule
    Properties:
      Description: "Mimix Daily Purge Sync for 195"
      Name: "Mimix-Daily-Purge-Sync-EXE-195-Trigger"
      State: DISABLED
      ScheduleExpression: 'cron(30 07 * * ? *)'
      RoleArn: !Ref 'TriggeringRole'
      Targets:
        - Arn: !Ref 'JobQueue'
          Id: EC2
          Input: '{"Parameters": {"business_unit": "195"}}'
          RoleArn: !Ref 'TriggeringRole'
          BatchParameters:
            JobDefinition: !Ref 'JobDefinitionArn'
            JobName: '195-Purge-Sync-Job'

  MimixDailyPurgeSync288:
    Type: AWS::Events::Rule
    Properties:
      Description: "Mimix Daily Purge Sync for 288"
      Name: "Mimix-Daily-Purge-Sync-EXE-288-Trigger"
      State: DISABLED
      ScheduleExpression: 'cron(45 03 * * ? *)'
      RoleArn: !Ref 'TriggeringRole'
      Targets:
        - Arn: !Ref 'JobQueue'
          Id: EC2
          Input: '{"Parameters": {"business_unit": "288"}}'
          RoleArn: !Ref 'TriggeringRole'
          BatchParameters:
            JobDefinition: !Ref 'JobDefinitionArn'
            JobName: '288-Purge-Sync-Job'

  MimixDailyPurgeSync293:
    Type: AWS::Events::Rule
    Properties:
      Description: "Mimix Daily Purge Sync for 293"
      Name: "Mimix-Daily-Purge-Sync-EXE-293-Trigger"
      State: DISABLED
      ScheduleExpression: 'cron(15 07 * * ? *)'
      RoleArn: !Ref 'TriggeringRole'
      Targets:
        - Arn: !Ref 'JobQueue'
          Id: EC2
          Input: '{"Parameters": {"business_unit": "293"}}'
          RoleArn: !Ref 'TriggeringRole'
          BatchParameters:
            JobDefinition: !Ref 'JobDefinitionArn'
            JobName: '293-Purge-Sync-Job'

  MimixDailyPurgeSync306:
    Type: AWS::Events::Rule
    Properties:
      Description: "Mimix Daily Purge Sync for 306"
      Name: "Mimix-Daily-Purge-Sync-EXE-306-Trigger"
      State: DISABLED
      ScheduleExpression: 'cron(45 04 * * ? *)'
      RoleArn: !Ref 'TriggeringRole'
      Targets:
        - Arn: !Ref 'JobQueue'
          Id: EC2
          Input: '{"Parameters": {"business_unit": "306"}}'
          RoleArn: !Ref 'TriggeringRole'
          BatchParameters:
            JobDefinition: !Ref 'JobDefinitionArn'
            JobName: '306-Purge-Sync-Job'

  MimixDailyPurgeSync320:
    Type: AWS::Events::Rule
    Properties:
      Description: "Mimix Daily Purge Sync for 320"
      Name: "Mimix-Daily-Purge-Sync-EXE-320-Trigger"
      State: DISABLED
      ScheduleExpression: 'cron(30 08 * * ? *)'
      RoleArn: !Ref 'TriggeringRole'
      Targets:
        - Arn: !Ref JobQueue
          Id: EC2
          Input: '{"Parameters": {"business_unit": "320"}}'
          RoleArn: !Ref 'TriggeringRole'
          BatchParameters:
            JobDefinition: !Ref 'JobDefinitionArn'
            JobName: '320-Purge-Sync-Job'

  MimixDailyPurgeSync332:
    Type: AWS::Events::Rule
    Properties:
      Description: "Mimix Daily Purge Sync for 332"
      Name: "Mimix-Daily-Purge-Sync-EXE-332-Trigger"
      State: DISABLED
      ScheduleExpression: 'cron(35 07 * * ? *)'
      RoleArn: !Ref 'TriggeringRole'
      Targets:
        - Arn: !Ref 'JobQueue'
          Id: EC2
          Input: '{"Parameters": {"business_unit": "332"}}'
          RoleArn: !Ref 'TriggeringRole'
          BatchParameters:
            JobDefinition: !Ref 'JobDefinitionArn'
            JobName: '332-Purge-Sync-Job'

  MimixDailyPurgeSync335:
    Type: AWS::Events::Rule
    Properties:
      Description: "Mimix Daily Purge Sync for 335"
      Name: "Mimix-Daily-Purge-Sync-EXE-335-Trigger"
      State: DISABLED
      ScheduleExpression: 'cron(45 08 * * ? *)'
      RoleArn: !Ref 'TriggeringRole'
      Targets:
        - Arn: !Ref 'JobQueue'
          Id: EC2
          Input: '{"Parameters": {"business_unit": "335"}}'
          RoleArn: !Ref 'TriggeringRole'
          BatchParameters:
            JobDefinition: !Ref 'JobDefinitionArn'
            JobName: '335-Purge-Sync-Job'

  MimixDailyPurgeSync344:
    Type: AWS::Events::Rule
    Properties:
      Description: "Mimix Daily Purge Sync for 344"
      Name: "Mimix-Daily-Purge-Sync-EXE-344-Trigger"
      State: DISABLED
      ScheduleExpression: 'cron(05 04 * * ? *)'
      RoleArn: !Ref 'TriggeringRole'
      Targets:
        - Arn: !Ref 'JobQueue'
          Id: EC2
          Input: '{"Parameters": {"business_unit": "344"}}'
          RoleArn: !Ref 'TriggeringRole'
          BatchParameters:
            JobDefinition: !Ref 'JobDefinitionArn'
            JobName: '344-Purge-Sync-Job'

  MimixDailyPurgeSync429:
    Type: AWS::Events::Rule
    Properties:
      Description: "Mimix Daily Purge Sync for 429"
      Name: "Mimix-Daily-Purge-Sync-EXE-429-Trigger"
      State: DISABLED
      ScheduleExpression: 'cron(55 06 * * ? *)'
      RoleArn: !Ref 'TriggeringRole'
      Targets:
        - Arn: !Ref 'JobQueue'
          Id: EC2
          Input: '{"Parameters": {"business_unit": "429"}}'
          RoleArn: !Ref 'TriggeringRole'
          BatchParameters:
            JobDefinition: !Ref 'JobDefinitionArn'
            JobName: '429-Purge-Sync-Job'

  MimixDailyPurgeSync450:
    Type: AWS::Events::Rule
    Properties:
      Description: "Mimix Daily Purge Sync for 450"
      Name: "Mimix-Daily-Purge-Sync-EXE-450-Trigger"
      State: DISABLED
      ScheduleExpression: 'cron(35 08 * * ? *)'
      RoleArn: !Ref 'TriggeringRole'
      Targets:
        - Arn: !Ref 'JobQueue'
          Id: EC2
          Input: '{"Parameters": {"business_unit": "450"}}'
          RoleArn: !Ref 'TriggeringRole'
          BatchParameters:
            JobDefinition: !Ref 'JobDefinitionArn'
            JobName: '450-Purge-Sync-Job'

  LaunchTemplate:
    Type: AWS::EC2::LaunchTemplate
    Properties:
      LaunchTemplateData:
        BlockDeviceMappings:
          - DeviceName: /dev/xvda
            Ebs:
              VolumeSize: !Ref 'RootVolumeSize'
              VolumeType: gp2
        UserData: !Base64
          |
          MIME-Version: 1.0
          Content-Type: multipart/mixed; boundary="==MYBOUNDARY=="

          --==MYBOUNDARY==
          MIME-Version: 1.0
          Content-Type: text/cloud-boothook; charset="us-ascii"

          #!/bin/bash
          cloud-init-per once docker_options echo 'DOCKER_STORAGE_OPTIONS="${DOCKER_STORAGE_OPTIONS} --storage-opt dm.basesize=20G"' >> /etc/sysconfig/docker-storage

          --==MYBOUNDARY==
        TagSpecifications:
          - ResourceType: volume
            Tags:
              - Key: Technical:ApplicationName
                Value: !Ref 'ApplicationName'
              - Key: Technical:ApplicationID
                Value: !Ref 'ApplicationID'
              - Key: Technical:PlatformOwner
                Value: !Ref 'Owner'
              - Key: Technical:Environment
                Value: !Ref 'Environment'
              - Key: Technical:ApplicationSubName
                Value: !Ref 'Component'
              - Key: Technical:ApplicationRole
                Value: !Ref 'ApplicationRole'
              - Key: Approver
                Value: !Ref 'Approver'
              - Key: PO_Number
                Value: !Ref 'PONumber'
              - Key: Project_ID
                Value: !Ref 'ProjectID'
              - Key: Support_Email
                Value: !Ref 'SupportEmail'
              - Key: 2WTAGGER
                Value: !Ref '2WTAGGER'
              - Key: Platform
                Value: !Ref 'Platform'
              - Key: Name
                Value: !Ref 'Component'
              - Key: ServiceName
                Value: !Ref 'ServiceName'
      LaunchTemplateName:
        Fn::Join:
          - ''
          - - CP-Mimix-Purge-Sync-Launch-Template-
            - Ref: 'EnvironmentShort'

  MimixPurgeEC2ComputeEnvironment:
    Type: AWS::Batch::ComputeEnvironment
    Properties:
      Type: MANAGED
      ServiceRole:
        Ref: 'MimixPurgeServiceRole'
      ComputeEnvironmentName:
        Fn::Join:
          - ''
          - - CP-Mimix-Purge-Sync-Compute-Environment-1-
            - Ref: 'EnvironmentShort'
      ComputeResources:
        MaxvCpus: 34
        SecurityGroupIds:
          - !Ref 'SGDNS'
          - !Ref 'SGWebServices'
          - !Ref 'SGRDSMySQL'
        Type: EC2
        Subnets:
          - !Ref 'PvtSNa'
          - !Ref 'PvtSNb'
          - !Ref 'PvtSNc'
        MinvCpus: 0
        InstanceRole: !Ref 'PurgeInstanceRole'
        InstanceTypes:
          - optimal
        Ec2KeyPair: !Ref 'PemKey'
        ImageId: !Ref 'CommonAMI'
        DesiredvCpus: 0
        LaunchTemplate:
          LaunchTemplateId: !Ref 'LaunchTemplate'
          Version: $Latest
        Tags:
          Technical:ApplicationName:
            Ref: 'ApplicationName'
          Technical:ApplicationID:
            Ref: 'ApplicationID'
          Technical:PlatformOwner:
            Ref: 'Owner'
          Technical:Environment:
            Ref: 'Environment'
          Technical:ApplicationSubName:
            Ref: 'Component'
          Technical:ApplicationRole:
            Ref: 'ApplicationRole'
          Approver:
            Ref: 'Approver'
          PO_Number:
            Ref: 'PONumber'
          Project_ID:
            Ref: 'ProjectID'
          Support_Email:
            Ref: 'SupportEmail'
          2WTAGGER:
            Ref: '2WTAGGER'
          Platform:
            Ref: 'Platform'
          Name:
            Ref: 'Component'
          ServiceName:
            Ref: 'ServiceName'
      State: ENABLED

  JobQueue:
    Type: AWS::Batch::JobQueue
    Properties:
      State: ENABLED
      JobQueueName:
        Fn::Join:
          - ''
          - - CP-Mimix-Purge-Job-Queue-
            - Ref: 'EnvironmentShort'
      Priority: 50
      ComputeEnvironmentOrder:
        - Order: 1
          ComputeEnvironment:
            Ref: 'MimixPurgeEC2ComputeEnvironment'
